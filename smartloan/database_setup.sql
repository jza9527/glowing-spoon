-- 创建自定义用户表
CREATE TABLE custom_user (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(150) UNIQUE NOT NULL,
    password VARCHAR(128) NOT NULL,
    email VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 插入测试用户数据
INSERT INTO custom_user (username, password, email) VALUES ('111', '123456', '111@163.com');

-- 客户信息表（Customer）
CREATE TABLE Customer (
    customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_name VARCHAR(255) NOT NULL,
    gender TEXT CHECK(gender IN ('男','女','其他')) NOT NULL,
    birth_date DATE,
    occupation VARCHAR(100),
    email VARCHAR(100),
    phone_number VARCHAR(20),
    address VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 信用评级表（CreditRating）
CREATE TABLE CreditRating (
    credit_rating_id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER,
    credit_score INTEGER,
    credit_score_range VARCHAR(50),
    risk_score INTEGER,
    risk_score_range VARCHAR(50),
    evaluation_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_id) REFERENCES Customer(customer_id)
);

-- 贷款信息表（LoanApplication）
CREATE TABLE LoanApplication (
    loan_id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER,
    application_amount REAL,
    application_date DATE,
    approval_date DATE,
    loan_term INTEGER,
    payment_method VARCHAR(50),
    status VARCHAR(50),
    overdue INTEGER,
    denied_reason VARCHAR(255),
    loan_purpose VARCHAR(100),
    interest_rate REAL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (customer_id) REFERENCES Customer(customer_id)
);

-- 担保人表（Guarantor）
CREATE TABLE Guarantor (
    guarantor_id INTEGER PRIMARY KEY AUTOINCREMENT,
    loan_id INTEGER,
    guarantor_name VARCHAR(255),
    guarantor_relationship VARCHAR(50),
    FOREIGN KEY (loan_id) REFERENCES LoanApplication(loan_id)
);

-- 贷款状态表（LoanStatus）
CREATE TABLE LoanStatus (
    status_id INTEGER PRIMARY KEY AUTOINCREMENT,
    loan_id INTEGER,
    status VARCHAR(50),
    processing_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (loan_id) REFERENCES LoanApplication(loan_id)
);

-- 插入客户基本信息（加入gender字段以满足NOT NULL约束）
INSERT INTO Customer (customer_id, customer_name, gender) VALUES
(1, '张明', '男'), (2, '李华', '男'), (3, '王芳', '女'), (4, '刘强', '男'), (5, '陈晓', '男'),
(6, '周涛', '男'), (7, '郑雪', '女'), (8, '马超', '男'), (9, '林薇', '女'), (10, '黄杰', '男'),
(11, '徐敏', '女'), (12, '高伟', '男'), (13, '赵静', '女'), (14, '孙浩', '男'), (15, '钱萍', '女'),
(16, '吴刚', '男'), (17, '周婷', '女'), (18, '郑阳', '男'), (19, '王磊', '男'), (20, '李娜', '女'),
(21, '张伟', '男'), (22, '李晨', '男'), (23, '王娜', '女'), (24, '刘涛', '男'), (25, '陈洁', '女'),
(26, '张丽', '女'), (27, '王洋', '男'), (28, '周莉', '女'), (29, '杨光', '男'), (30, '郑杰', '男'),
(31, '刘斌', '男'), (32, '黄敏', '女'), (33, '周俊', '男'), (34, '郑婷', '女'), (35, '刘晓', '男'),
(36, '高辉', '男'), (37, '赵鹏', '男'), (38, '欧阳晨', '男'), (39, '司马静', '女'), (40, '令狐峰', '男'),
(41, '慕容雪', '女'), (42, '东方宇', '男'), (43, '南宫雨', '女'), (44, '西门洋', '男'), (45, '夏侯敏', '女'),
(46, '诸葛林', '男'), (47, '上官宏', '男'), (48, '宇文涛', '男'), (49, '长孙浩', '男'), (50, '司徒兰', '女'),
(51, '端木峰', '男'), (52, '公冶静', '女'), (53, '淳于杰', '男'), (54, '仲孙洋', '男'), (55, '申屠伟', '男'),
(56, '轩辕刚', '男'), (57, '鲜于丽', '女'), (58, '闾丘峰', '男'), (59, '东郭强', '男'), (60, '欧阳光', '男'),
(61, '羊舌杰', '男');

-- 插入信用评级信息
INSERT INTO CreditRating (customer_id, credit_score, credit_score_range, risk_score, risk_score_range) VALUES
(1, 721, 'A (良好)', 650, '600-700'), (2, 654, 'B (关注)', 630, '600-700'), 
(3, 589, 'C (风险)', 700, '700-800'), (4, 698, 'A (良好)', 720, '700-800'), 
(5, 732, 'B (关注)', 680, '600-700'), (6, 680, 'B (关注)', 610, '600-700'), 
(7, 745, 'A (良好)', 690, '600-700'), (8, 550, 'D (较差)', 740, '700-800'), 
(9, 710, 'A (良好)', 670, '600-700'), (10, 780, 'A (良好)', 750, '700-800'), 
(11, 620, 'B (关注)', 640, '600-700'), (12, 530, 'C (风险)', 710, '700-800'), 
(13, 705, 'A (良好)', 680, '600-700'), (14, 670, 'B (关注)', 660, '600-700'), 
(15, 810, 'A (良好)', 790, '700-800'), (16, 590, 'C (风险)', 730, '700-800'), 
(17, 725, 'A (良好)', 690, '600-700'), (18, 690, 'B (关注)', 710, '700-800'), 
(19, 580, 'C (风险)', 750, '700-800'), (20, 738, 'A (良好)', 670, '600-700'), 
(21, 680, 'B (关注)', 700, '700-800'), (22, 750, 'A (良好)', 640, '600-700'), 
(23, 590, 'C (风险)', 730, '700-800'), (24, 720, 'A (良好)', 670, '600-700'), 
(25, 690, 'B (关注)', 710, '700-800'), (26, 740, 'A (良好)', 650, '600-700'), 
(27, 760, 'A (良好)', 690, '700-800'), (28, 630, 'B (关注)', 720, '600-700'), 
(29, 660, 'B (关注)', 680, '600-700'), (30, 710, 'A (良好)', 670, '600-700'), 
(31, 690, 'B (关注)', 710, '700-800'), (32, 735, 'A (良好)', 680, '600-700'), 
(33, 750, 'A (良好)', 690, '700-800'), (34, 690, 'B (关注)', 670, '600-700'), 
(35, 680, 'B (关注)', 720, '700-800'), (36, 700, 'B (关注)', 650, '600-700'), 
(37, 760, 'A (良好)', 690, '700-800'), (38, 925, 'AAA (极优)', 420, '400-500'), 
(39, 890, 'AAA (极优)', 450, '400-500'), (40, 910, 'AAA (极优)', 480, '400-500'), 
(41, 835, 'AA (优秀)', 520, '500-600'), (42, 815, 'AA (优秀)', 580, '500-600'), 
(43, 825, 'AA (优秀)', 550, '500-600'), (44, 785, 'A (良好)', 620, '600-700'), 
(45, 765, 'A (良好)', 680, '600-700'), (46, 775, 'A (良好)', 650, '600-700'), 
(47, 735, 'BBB (一般)', 720, '700-800'), (48, 715, 'BBB (一般)', 750, '700-800'), 
(49, 725, 'BBB (一般)', 730, '700-800'), (50, 685, 'BB (合格)', 820, '800-900'), 
(51, 665, 'BB (合格)', 850, '800-900'), (52, 675, 'BB (合格)', 830, '800-900'), 
(53, 635, 'B (关注)', 920, '900-1000'), (54, 625, 'B (关注)', 950, '900-1000'), 
(55, 615, 'B (关注)', 980, '900-1000'), (56, 580, 'C (风险)', 1050, '1000-1100'), 
(57, 565, 'C (风险)', 1080, '1000-1100'), (58, 570, 'C (风险)', 1030, '1000-1100'), 
(59, 520, 'D (高危)', 1150, '1100-1200'), (60, 500, 'D (高危)', 1180, '1100-1200'), 
(61, 480, 'D (高危)', 1200, '1100-1200');

-- 插入贷款申请信息
INSERT INTO LoanApplication (loan_id, customer_id, application_amount, application_date, approval_date, loan_term, payment_method, status, overdue, denied_reason) VALUES
(1, 1, 120000.00, '2023-10-15', '2023-10-16', 24, '等额本息', 'approved', 0, NULL),
(2, 2, 80000.00, '2023-10-14', NULL, 36, '等额本金', 'pending', 0, NULL),
(3, 3, 200000.00, '2023-10-14', NULL, 12, '等额本息', 'rejected', 1, '信用评分低'),
(4, 4, 150000.00, '2023-10-13', '2023-10-14', 24, '等额本金', 'approved', 0, NULL),
(5, 5, 95000.00, '2023-10-12', NULL, 36, '等额本息', 'processing', 0, NULL),
(6, 6, 50000.00, '2023-10-11', '2023-10-13', 12, '等额本金', 'approved', 0, NULL),
(7, 7, 180000.00, '2023-10-10', NULL, 48, '等额本息', 'pending', 1, NULL),
(8, 8, 220000.00, '2023-10-09', NULL, 24, '按月付息到期还本', 'rejected', 1, '历史逾期严重'),
(9, 9, 75000.00, '2023-10-08', '2023-10-09', 36, '等额本息', 'approved', 0, NULL),
(10, 10, 300000.00, '2023-10-07', NULL, 60, '等额本金', 'processing', 0, NULL),
(11, 11, 60000.00, '2023-10-06', '2023-10-08', 24, '等额本息', 'approved', 0, NULL),
(12, 12, 90000.00, '2023-10-05', NULL, 12, '一次性还本付息', 'rejected', 1, '收入证明不足'),
(13, 13, 250000.00, '2023-10-04', NULL, 36, '等额本金', 'pending', 0, NULL),
(14, 14, 110000.00, '2023-10-03', '2023-10-05', 24, '等额本息', 'approved', 0, NULL),
(15, 15, 350000.00, '2023-10-02', NULL, 48, '按月付息到期还本', 'processing', 0, NULL),
(16, 16, 45000.00, '2023-10-01', NULL, 18, '等额本金', 'rejected', 1, '高风险职业'),
(17, 17, 140000.00, '2023-09-30', '2023-10-02', 24, '等额本息', 'approved', 0, NULL),
(18, 18, 270000.00, '2023-09-29', NULL, 36, '等额本金', 'pending', 0, NULL),
(19, 19, 80000.00, '2023-09-28', NULL, 12, '一次性还本付息', 'rejected', 1, '抵押物不足'),
(20, 20, 160000.00, '2023-09-27', '2023-09-29', 36, '等额本息', 'approved', 0, NULL),
(21, 21, 100000.00, '2023-11-15', '2023-11-17', 24, '等额本息', 'approved', 0, NULL),
(22, 22, 150000.00, '2023-11-14', NULL, 36, '等额本金', 'pending', 0, NULL),
(23, 23, 120000.00, '2023-11-13', NULL, 12, '一次性还本付息', 'rejected', 1, '信用评分低'),
(24, 24, 180000.00, '2023-11-12', '2023-11-13', 36, '等额本息', 'approved', 0, NULL),
(25, 25, 85000.00, '2023-11-11', '2023-11-12', 24, '等额本息', 'approved', 0, NULL),
(26, 26, 110000.00, '2023-11-10', '2023-11-11', 24, '等额本金', 'approved', 0, NULL),
(27, 27, 200000.00, '2023-11-09', NULL, 48, '等额本息', 'processing', 0, NULL),
(28, 28, 130000.00, '2023-11-08', NULL, 36, '等额本金', 'pending', 1, NULL),
(29, 29, 95000.00, '2023-11-07', '2023-11-08', 24, '等额本息', 'approved', 0, NULL),
(30, 30, 170000.00, '2023-11-06', NULL, 36, '按月付息到期还本', 'rejected', 1, '收入证明不足'),
(31, 31, 120000.00, '2023-11-05', NULL, 24, '等额本息', 'pending', 0, NULL),
(32, 32, 160000.00, '2023-11-04', '2023-11-06', 24, '等额本金', 'approved', 0, NULL),
(33, 33, 180000.00, '2023-11-03', '2023-11-04', 36, '等额本息', 'approved', 0, NULL),
(34, 34, 150000.00, '2023-11-02', '2023-11-03', 12, '等额本金', 'approved', 0, NULL),
(35, 35, 110000.00, '2023-11-01', NULL, 18, '一次性还本付息', 'rejected', 1, '信用评分低'),
(36, 36, 95000.00, '2023-10-31', '2023-11-02', 24, '等额本息', 'approved', 0, NULL),
(37, 37, 250000.00, '2023-10-30', '2023-11-01', 48, '等额本息', 'approved', 0, NULL),
(38, 38, 500000.00, '2023-06-15', '2023-06-16', 60, '等额本息', 'approved', 0, NULL),
(39, 39, 350000.00, '2023-08-22', '2023-08-23', 36, '等额本金', 'approved', 0, NULL),
(40, 40, 280000.00, '2023-10-05', '2023-10-06', 24, '按月付息到期还本', 'approved', 0, NULL),
(41, 41, 220000.00, '2023-06-25', '2023-06-26', 36, '等额本息', 'approved', 0, NULL),
(42, 42, 180000.00, '2023-09-10', '2023-09-11', 24, '等额本金', 'approved', 0, NULL),
(43, 43, 150000.00, '2023-11-18', NULL, 48, '等额本息', 'processing', 0, NULL),
(44, 44, 120000.00, '2023-07-03', '2023-07-04', 36, '等额本金', 'approved', 0, NULL),
(45, 45, 95000.00, '2023-09-15', '2023-09-16', 24, '等额本息', 'approved', 0, NULL),
(46, 46, 110000.00, '2023-11-30', NULL, 12, '按月付息到期还本', 'pending', 0, NULL),
(47, 47, 80000.00, '2023-06-10', '2023-06-11', 24, '等额本息', 'approved', 0, NULL),
(48, 48, 65000.00, '2023-08-17', NULL, 36, '等额本金', 'processing', 0, NULL),
(49, 49, 70000.00, '2023-10-25', NULL, 12, '等额本息', 'pending', 1, NULL),
(50, 50, 50000.00, '2023-07-20', '2023-07-21', 12, '一次性还本付息', 'approved', 1, NULL),
(51, 51, 45000.00, '2023-09-05', NULL, 24, '等额本息', 'rejected', 1, '工作不稳定'),
(52, 52, 55000.00, '2023-11-15', NULL, 18, '等额本金', 'pending', 1, NULL),
(53, 53, 30000.00, '2023-06-30', NULL, 6, '一次性还本付息', 'rejected', 1, '信用记录不良'),
(54, 54, 35000.00, '2023-08-12', NULL, 12, '等额本息', 'rejected', 1, '负债过高'),
(55, 55, 40000.00, '2023-10-08', NULL, 9, '等额本金', 'rejected', 1, '多次逾期记录'),
(56, 56, 20000.00, '2023-07-08', NULL, 3, '一次性还本付息', 'rejected', 1, '严重信用问题'),
(57, 57, 25000.00, '2023-09-22', NULL, 6, '等额本息', 'rejected', 1, '法院执行记录'),
(58, 58, 15000.00, '2023-11-05', NULL, 4, '等额本金', 'rejected', 1, '欺诈风险'),
(59, 59, 10000.00, '2023-06-18', NULL, 3, '一次性还本付息', 'rejected', 1, '恶意逃债历史'),
(60, 60, 8000.00, '2023-08-30', NULL, 2, '等额本息', 'rejected', 1, '涉嫌金融诈骗'),
(61, 61, 5000.00, '2023-10-12', NULL, 1, '等额本金', 'rejected', 1, '黑名单客户');

-- 插入担保人信息
INSERT INTO Guarantor (loan_id, guarantor_name, guarantor_relationship) VALUES
(1, '李四', '朋友'),
(4, '赵五', '父母'),
(6, '吴磊', '同事'),
(7, '孙阳', '配偶'),
(10, '钱芳', '兄妹'),
(12, '周琳', '朋友'),
(13, '吴强', '父母'),
(17, '王峰', '朋友'),
(18, '李霞', '父母'),
(20, '陈明', '配偶'),
(21, '刘晨', '同学'),
(23, '张勇', '朋友'),
(24, '王静', '父母'),
(25, '赵强', '同事'),
(26, '李娜', '朋友'),
(27, '孙浩', '兄弟'),
(28, '朱晓', '配偶'),
(29, '王雪', '同事'),
(30, '李霞', '父母'),
(31, '赵敏', '朋友'),
(32, '孙亮', '父母'),
(33, '郑亮', '兄妹'),
(34, '李华', '朋友'),
(35, '王明', '同事'),
(36, '陈华', '父母'),
(37, '王彬', '兄弟'),
(39, '诸葛明', '配偶'),
(40, '上官云', '朋友'),
(42, '公孙亮', '同事'),
(43, '独孤燕', '父母'),
(45, '皇甫杰', '兄妹'),
(47, '司徒静', '朋友'),
(49, '端木燕', '配偶'),
(51, '公羊明', '父母'),
(54, '申屠琳', '朋友'),
(57, '闾丘明', '亲属'),
(60, '羊舌燕', '朋友');

-- 插入贷款状态信息
INSERT INTO LoanStatus (loan_id, status, processing_date) VALUES
(1, 'approved', '2023-10-16'),
(2, 'pending', '2023-10-14'),
(3, 'rejected', '2023-10-14'),
(4, 'approved', '2023-10-14'),
(5, 'processing', '2023-10-12'),
(6, 'approved', '2023-10-13'),
(7, 'pending', '2023-10-10'),
(8, 'rejected', '2023-10-09'),
(9, 'approved', '2023-10-09'),
(10, 'processing', '2023-10-07'),
(11, 'approved', '2023-10-08'),
(12, 'rejected', '2023-10-05'),
(13, 'pending', '2023-10-04'),
(14, 'approved', '2023-10-05'),
(15, 'processing', '2023-10-02'),
(16, 'rejected', '2023-10-01'),
(17, 'approved', '2023-10-02'),
(18, 'pending', '2023-09-29'),
(19, 'rejected', '2023-09-28'),
(20, 'approved', '2023-09-29'),
(21, 'approved', '2023-11-17'),
(22, 'pending', '2023-11-14'),
(23, 'rejected', '2023-11-13'),
(24, 'approved', '2023-11-13'),
(25, 'approved', '2023-11-12'),
(26, 'approved', '2023-11-11'),
(27, 'processing', '2023-11-09'),
(28, 'pending', '2023-11-08'),
(29, 'approved', '2023-11-08'),
(30, 'rejected', '2023-11-06'),
(31, 'pending', '2023-11-05'),
(32, 'approved', '2023-11-06'),
(33, 'approved', '2023-11-04'),
(34, 'approved', '2023-11-03'),
(35, 'rejected', '2023-11-01'),
(36, 'approved', '2023-11-02'),
(37, 'approved', '2023-11-01'),
(38, 'approved', '2023-06-16'),
(39, 'approved', '2023-08-23'),
(40, 'approved', '2023-10-06'),
(41, 'approved', '2023-06-26'),
(42, 'approved', '2023-09-11'),
(43, 'processing', '2023-11-18'),
(44, 'approved', '2023-07-04'),
(45, 'approved', '2023-09-16'),
(46, 'pending', '2023-11-30'),
(47, 'approved', '2023-06-11'),
(48, 'processing', '2023-08-17'),
(49, 'pending', '2023-10-25'),
(50, 'approved', '2023-07-21'),
(51, 'rejected', '2023-09-05'),
(52, 'pending', '2023-11-15'),
(53, 'rejected', '2023-06-30'),
(54, 'rejected', '2023-08-12'),
(55, 'rejected', '2023-10-08'),
(56, 'rejected', '2023-07-08'),
(57, 'rejected', '2023-09-22'),
(58, 'rejected', '2023-11-05'),
(59, 'rejected', '2023-06-18'),
(60, 'rejected', '2023-08-30'),
(61, 'rejected', '2023-10-12'); 